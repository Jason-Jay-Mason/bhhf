import { styled } from "@linaria/react";
import { useEffect, useRef } from "react";
import { Loader } from "@googlemaps/js-api-loader";
import { useThemeStatus } from "../hooks/useTheme";
import { maxMin, colors, fontSize, spacing, colorPallet, breakPoints } from "../styles/theme";
import Section from "./section";

//#region styles
const div = {};
div.contact = styled.div`
  position: relative;
  max-width: ${maxMin.containerMaxWidth};
  margin: 0 auto;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  padding: ${spacing.s75ish} 0;
  @media ${breakPoints.lrg} {
    flex-direction: column;
  }
  @media ${breakPoints.md} {
    padding: ${spacing.s45ish} 0;
  }
  svg {
    filter: ${colors.iconFilter};
  }
  .contactInfo {
    background-color: ${colors.rainCloudBeigeTwo};
    padding: ${spacing.s75ish} ${spacing.s17ish};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 45%;
    text-align: center;
    color: ${colors.textBrown};
    @media ${breakPoints.lrg} {
      width: 100%;
    }
    @media ${breakPoints.md} {
      padding: ${spacing.s75ish} ${spacing.s17ish};
    }
    .contactTitle {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      padding-bottom: ${spacing.s17ish};
      svg {
        margin-right: ${spacing.s10ish};
      }
      h4 {
        font-family: "Noto Serif", "Helvetica", "Arial", sans-serif;
        font-weight: lighter;
        font-size: ${fontSize.med};
      }
    }
    .contactText {
      padding-bottom: ${spacing.s45ish};
      :last-child {
        padding-bottom: 0;
      }
    }
  }
`;

div.map = styled.div`
  width: 100%;
  height: auto;
  @media ${breakPoints.lrg} {
    height: 100vw;
    max-height: 600px;
  }
`;
//#endregion

const ContactAndMap = ({
  businessInfo: {
    contact: { email, phone, address },
    hours,
  },
}) => {
  const themeStatus = useThemeStatus();
  const googlemap = useRef(null);

  useEffect(() => {
    const mapId = themeStatus === "dark" ? process.env.NEXT_PUBLIC_MAPID_DARK : process.env.NEXT_PUBLIC_MAPID;
    const loader = new Loader({
      apiKey: process.env.NEXT_PUBLIC_GOOGLEMAPS,
      version: "weekly",
    });
    let map;
    loader.load().then(() => {
      if (googlemap.current !== null) {
        let myLatLng = { lat: 40.1128715, lng: -105.0804637 };
        map = new google.maps.Map(googlemap.current, {
          mapId: mapId,
          center: myLatLng,
          zoom: 10.5,
          disableDefaultUI: true,
        });
        const lineSymbol = {
          path: google.maps.SymbolPath.CIRCLE,
          scale: 8,
          strokeColor: colorPallet.light.buttonBlue,
        };

        new google.maps.Marker({
          position: myLatLng,
          map,
          icon: lineSymbol,
          title: "Broken Heart Horse Farm",
        });
      }
    });
  }, [googlemap, themeStatus]);
  return (
    <Section>
      <div.contact>
        <div className="contactInfo">
          <div className="contactTitle">
            <svg height={30} width={30} viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M14.063 1.87476C14.063 1.62613 14.1617 1.38766 14.3376 1.21186C14.5134 1.03598 14.7519 0.937256 15.0005 0.937256C18.7288 0.941356 22.3033 2.42426 24.9398 5.06051C27.576 7.69701 29.059 11.2713 29.063 14.9998C29.063 15.3347 28.8843 15.6442 28.5943 15.8117C28.3043 15.9792 27.9468 15.9792 27.6568 15.8117C27.3668 15.6442 27.188 15.3347 27.188 14.9998C27.1845 11.7685 25.899 8.67076 23.6143 6.38601C21.3294 4.10123 18.2318 2.81601 15.0005 2.81226C14.7519 2.81226 14.5134 2.71353 14.3376 2.53766C14.1617 2.36188 14.063 2.12341 14.063 1.87476ZM14.063 5.62476C14.063 5.37613 14.1617 5.13766 14.3376 4.96186C14.5134 4.78598 14.7519 4.68726 15.0005 4.68726C17.7345 4.69038 20.3558 5.77788 22.289 7.71126C24.2223 9.64463 25.3098 12.2658 25.313 14.9998C25.313 15.3347 25.1343 15.6442 24.8443 15.8117C24.5542 15.9792 24.1968 15.9792 23.9068 15.8117C23.6167 15.6442 23.438 15.3347 23.438 14.9998C23.4356 12.7628 22.5458 10.618 20.964 9.03626C19.3822 7.45443 17.2375 6.56468 15.0005 6.56223C14.7519 6.56223 14.5134 6.46351 14.3376 6.28763C14.1617 6.11186 14.063 5.87338 14.063 5.62473L14.063 5.62476ZM14.063 9.37475C14.063 9.12613 14.1617 8.88766 14.3376 8.71186C14.5134 8.53598 14.7519 8.43726 15.0005 8.43726C16.7404 8.43931 18.4085 9.13131 19.6388 10.3616C20.869 11.5919 21.561 13.2598 21.5631 14.9998C21.5631 15.3348 21.3844 15.6443 21.0943 15.8118C20.8043 15.9792 20.4469 15.9792 20.1568 15.8118C19.8668 15.6443 19.6881 15.3348 19.6881 14.9998C19.6866 13.7571 19.1923 12.5657 18.3136 11.6868C17.4348 10.8081 16.2434 10.3138 15.0006 10.3123C14.752 10.3123 14.5135 10.2136 14.3377 10.0377C14.1618 9.86196 14.0631 9.62348 14.0631 9.37483L14.063 9.37475Z"
                fill="#7F4721"
              />
              <path
                d="M27.1224 17.878H22.5294C21.7599 17.8796 21.0095 18.117 20.3794 18.5584C19.7491 18.9997 19.2694 19.6237 19.0049 20.3463L18.3536 22.1361C16.1042 21.0005 14.0501 19.5139 12.2683 17.7321C10.4865 15.9505 8.99981 13.8964 7.86406 11.6471L9.65469 10.9953V10.9954C10.3769 10.7307 11.0006 10.251 11.4419 9.62104C11.8831 8.99096 12.1206 8.24086 12.1225 7.47171V2.87796C12.1217 2.13226 11.8251 1.41741 11.2978 0.89016C10.7705 0.36281 10.0557 0.0662352 9.30996 0.0654602H2.82096C2.03981 0.0654602 1.29361 0.389485 0.760312 0.960285C0.227112 1.53109 -0.0455379 2.29759 0.00748711 3.07689C0.236487 6.39914 1.04781 9.65514 2.40436 12.6964C3.85104 15.9971 5.90111 18.9989 8.44911 21.5474C10.9971 24.0959 13.9986 26.1465 17.2991 27.594C20.3414 28.9517 23.5989 29.7637 26.9226 29.9925C26.9884 29.997 27.0531 29.9997 27.1186 29.9997C27.8659 29.9987 28.5821 29.7012 29.1101 29.1725C29.6381 28.644 29.9349 27.9272 29.9351 27.18V20.6905C29.9344 19.9448 29.6376 19.23 29.1104 18.7027C28.5831 18.1754 27.8681 17.8788 27.1226 17.878L27.1224 17.878ZM28.0599 27.1797C28.0599 27.4407 27.9519 27.69 27.7616 27.8687C27.5711 28.0472 27.3156 28.1392 27.0551 28.1227C23.9478 27.9082 20.9028 27.1485 18.0591 25.8787C14.9696 24.525 12.1603 22.606 9.77531 20.2208C7.39036 17.8354 5.47181 15.0258 4.11856 11.936C2.85021 9.09351 2.09171 6.05001 1.87794 2.94451C1.85929 2.68581 1.94991 2.43114 2.12784 2.24236C2.30636 2.04901 2.55771 1.93944 2.82091 1.94021H9.30991C9.55846 1.94051 9.79684 2.03934 9.97251 2.21511C10.1483 2.39079 10.2471 2.62916 10.2474 2.87771V7.47146C10.2465 7.85614 10.1278 8.23134 9.90719 8.54646C9.68659 8.86159 9.37466 9.10154 9.01344 9.23396L6.25194 10.238C6.00664 10.327 5.80956 10.5143 5.70829 10.7549C5.60691 10.9954 5.61054 11.2673 5.71816 11.5051C6.99024 14.3168 8.76016 16.8756 10.9422 19.0578C13.1244 21.24 15.6829 23.0101 18.4947 24.2821C18.7325 24.39 19.0047 24.3937 19.2455 24.2924C19.4863 24.191 19.6739 23.9939 19.763 23.7483L20.7678 20.987C20.9 20.6259 21.1397 20.3139 21.4547 20.0932C21.7697 19.8724 22.1448 19.7536 22.5294 19.7526H27.1224C27.3709 19.7529 27.6094 19.8518 27.7851 20.0275C27.9609 20.2032 28.0596 20.4416 28.0599 20.6901V27.1797Z"
                fill="#7F4721"
              />
            </svg>
            <h4>Contact</h4>
          </div>
          <div className="contactText">
            <p>{phone ? phone : "No phone, please input a phone number in the global menu"}</p>
            <p>{address ? address : "No address, please input an address number in the global menu"}</p>
            <p>{email ? email : "No email, please input an email in the global menu"}</p>
          </div>
          <div className="contactTitle">
            <svg height={32} width={32} viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g>
                <path
                  d="M26.6667 16.4666V3.33331C26.6667 3.15654 26.5965 2.98697 26.4714 2.86195C26.3463 2.73686 26.1768 2.66665 26 2.66665H22.6667V1.99998C22.6667 1.2855 22.2855 0.62518 21.6667 0.2679C21.0478 -0.0893 20.2855 -0.0893 19.6667 0.2679C19.0478 0.62518 18.6667 1.2855 18.6667 1.99998V2.66665H8V1.99998C8 1.2855 7.61885 0.62518 7 0.2679C6.38115 -0.0893 5.61885 -0.0893 5 0.2679C4.38115 0.62518 4 1.2855 4 1.99998V2.66665H0.666667C0.489893 2.66665 0.32032 2.73686 0.195307 2.86195C0.0701867 2.98697 0 3.15654 0 3.33331V28.6666C0 28.8434 0.0701867 29.013 0.195307 29.1381C0.320293 29.2632 0.489893 29.3333 0.666667 29.3333H18.0533C19.1392 30.5562 20.5737 31.4168 22.1637 31.7994C23.7537 32.1821 25.4227 32.0682 26.9461 31.4733C28.4693 30.8784 29.7739 29.8309 30.6835 28.472C31.5931 27.113 32.0645 25.508 32.0341 23.8728C32.0037 22.2377 31.4731 20.6512 30.5133 19.3272C29.5536 18.003 28.2112 17.0048 26.6669 16.4669L26.6667 16.4666ZM20 1.99998C20 1.76185 20.1271 1.54174 20.3333 1.42259C20.5396 1.30353 20.7938 1.30353 21 1.42259C21.2062 1.54177 21.3333 1.76187 21.3333 1.99998V4.66665C21.3333 4.90478 21.2062 5.12489 21 5.24403C20.7938 5.3631 20.5396 5.3631 20.3333 5.24403C20.1271 5.12486 20 4.90475 20 4.66665V1.99998ZM5.33333 1.99998C5.33333 1.76185 5.46043 1.54174 5.66667 1.42259C5.87291 1.30353 6.12709 1.30353 6.33333 1.42259C6.53957 1.54177 6.66667 1.76187 6.66667 1.99998V4.66665C6.66667 4.90478 6.53957 5.12489 6.33333 5.24403C6.12709 5.3631 5.87291 5.3631 5.66667 5.24403C5.46043 5.12486 5.33333 4.90475 5.33333 4.66665V1.99998ZM1.33333 3.99998H4V4.66665C4 5.38113 4.38115 6.04145 5 6.39873C5.61885 6.75593 6.38115 6.75593 7 6.39873C7.61885 6.04145 8 5.38113 8 4.66665V3.99998H18.6667V4.66665C18.6667 5.38113 19.0478 6.04145 19.6667 6.39873C20.2855 6.75593 21.0478 6.75593 21.6667 6.39873C22.2855 6.04145 22.6667 5.38113 22.6667 4.66665V3.99998H25.3333V7.99998H1.33333V3.99998ZM1.33333 28V9.33331H25.3333V16.12C24.1487 15.9165 22.9334 15.9841 21.7787 16.3179C20.624 16.6516 19.56 17.2426 18.6667 18.0466V17.3333C18.6667 17.1565 18.5965 16.987 18.4714 16.862C18.3463 16.7368 18.1768 16.6666 18 16.6666H15.3333C15.1566 16.6666 14.987 16.7368 14.862 16.862C14.7369 16.9869 14.6667 17.1565 14.6667 17.3333V20C14.6667 20.1768 14.7369 20.3463 14.862 20.4713C14.987 20.5964 15.1566 20.6666 15.3333 20.6666H16.7267C16.1958 21.8284 15.9509 23.1004 16.0124 24.3762C16.0739 25.6521 16.44 26.8946 17.08 28H1.33333ZM17.3333 19.3333H16V18H17.3333V19.3333ZM24 30.6666C18.36 30.6666 15.4867 24.0933 18.5467 20.1666C22.2867 14.8333 30.6667 17.5 30.6667 24C30.6667 25.1702 30.3587 26.3199 29.7736 27.3333C29.1883 28.3466 28.3467 29.1882 27.3333 29.7736C26.3199 30.3586 25.1702 30.6666 24 30.6666Z"
                  fill="#7F4721"
                />
                <path
                  d="M12.6668 11.3333H10.0002C9.82339 11.3333 9.65382 11.4035 9.5288 11.5286C9.40371 11.6537 9.3335 11.8232 9.3335 12V14.6667C9.3335 14.8434 9.40371 15.013 9.5288 15.138C9.65382 15.2631 9.82339 15.3333 10.0002 15.3333H12.6668C12.8436 15.3333 13.0132 15.2631 13.1382 15.138C13.2633 15.013 13.3335 14.8434 13.3335 14.6667V12C13.3335 11.8232 13.2633 11.6537 13.1382 11.5286C13.0132 11.4035 12.8436 11.3333 12.6668 11.3333ZM12.0002 14H10.6668V12.6667H12.0002V14Z"
                  fill="#7F4721"
                />
                <path
                  d="M15.3332 15.3333H17.9998C18.1766 15.3333 18.3462 15.2631 18.4712 15.138C18.5963 15.013 18.6665 14.8434 18.6665 14.6667V12C18.6665 11.8232 18.5963 11.6537 18.4712 11.5286C18.3462 11.4035 18.1766 11.3333 17.9998 11.3333H15.3332C15.1564 11.3333 14.9868 11.4035 14.8618 11.5286C14.7367 11.6536 14.6665 11.8232 14.6665 12V14.6667C14.6665 14.8434 14.7367 15.013 14.8618 15.138C14.9868 15.2631 15.1564 15.3333 15.3332 15.3333ZM15.9998 12.6667H17.3332V14H15.9998V12.6667Z"
                  fill="#7F4721"
                />
                <path
                  d="M20.6667 15.3333H23.3333C23.5101 15.3333 23.6797 15.2631 23.8047 15.138C23.9298 15.013 24 14.8434 24 14.6667V12C24 11.8232 23.9298 11.6537 23.8047 11.5286C23.6797 11.4035 23.5101 11.3333 23.3333 11.3333H20.6667C20.4899 11.3333 20.3203 11.4035 20.1953 11.5286C20.0702 11.6536 20 11.8232 20 12V14.6667C20 14.8434 20.0702 15.013 20.1953 15.138C20.3203 15.2631 20.4899 15.3333 20.6667 15.3333ZM21.3333 12.6667H22.6667V14H21.3333V12.6667Z"
                  fill="#7F4721"
                />
                <path
                  d="M7.33333 16.6667H4.66667C4.48989 16.6667 4.32032 16.7369 4.19531 16.862C4.07021 16.987 4 17.1566 4 17.3333V20C4 20.1768 4.07021 20.3463 4.19531 20.4714C4.32032 20.5965 4.48989 20.6667 4.66667 20.6667H7.33333C7.51011 20.6667 7.67968 20.5965 7.80469 20.4714C7.92979 20.3464 8 20.1768 8 20V17.3333C8 17.1566 7.92979 16.987 7.80469 16.862C7.67971 16.7369 7.51011 16.6667 7.33333 16.6667ZM6.66667 19.3333H5.33333V18H6.66667V19.3333Z"
                  fill="#7F4721"
                />
                <path
                  d="M12.6668 16.6667H10.0002C9.82339 16.6667 9.65382 16.7369 9.5288 16.862C9.40371 16.987 9.3335 17.1566 9.3335 17.3333V20C9.3335 20.1768 9.40371 20.3463 9.5288 20.4714C9.65382 20.5965 9.82339 20.6667 10.0002 20.6667H12.6668C12.8436 20.6667 13.0132 20.5965 13.1382 20.4714C13.2633 20.3464 13.3335 20.1768 13.3335 20V17.3333C13.3335 17.1566 13.2633 16.987 13.1382 16.862C13.0132 16.7369 12.8436 16.6667 12.6668 16.6667ZM12.0002 19.3333H10.6668V18H12.0002V19.3333Z"
                  fill="#7F4721"
                />
                <path
                  d="M7.33333 22H4.66667C4.48989 22 4.32032 22.0702 4.19531 22.1953C4.07021 22.3203 4 22.4899 4 22.6667V25.3333C4 25.5101 4.07021 25.6797 4.19531 25.8047C4.32032 25.9298 4.48989 26 4.66667 26H7.33333C7.51011 26 7.67968 25.9298 7.80469 25.8047C7.92979 25.6797 8 25.5101 8 25.3333V22.6667C8 22.4899 7.92979 22.3203 7.80469 22.1953C7.67971 22.0702 7.51011 22 7.33333 22ZM6.66667 24.6667H5.33333V23.3333H6.66667V24.6667Z"
                  fill="#7F4721"
                />
                <path
                  d="M12.6668 22H10.0002C9.82339 22 9.65382 22.0702 9.5288 22.1953C9.40371 22.3203 9.3335 22.4899 9.3335 22.6667V25.3333C9.3335 25.5101 9.40371 25.6797 9.5288 25.8047C9.65382 25.9298 9.82339 26 10.0002 26H12.6668C12.8436 26 13.0132 25.9298 13.1382 25.8047C13.2633 25.6797 13.3335 25.5101 13.3335 25.3333V22.6667C13.3335 22.4899 13.2633 22.3203 13.1382 22.1953C13.0132 22.0702 12.8436 22 12.6668 22ZM12.0002 24.6667H10.6668V23.3333H12.0002V24.6667Z"
                  fill="#7F4721"
                />
                <path
                  d="M24.6668 23.7267V19.3333C24.6668 19.0952 24.5397 18.8751 24.3335 18.7559C24.1273 18.6369 23.8731 18.6369 23.6668 18.7559C23.4606 18.8751 23.3335 19.0952 23.3335 19.3333V24C23.3335 24.3667 23.3335 24.2867 25.5268 26.4733C25.6959 26.6424 25.9425 26.7085 26.1734 26.6466C26.4044 26.5847 26.5849 26.4043 26.6467 26.1732C26.7087 25.9423 26.6426 25.6957 26.4735 25.5267L24.6668 23.7267Z"
                  fill="#7F4721"
                />
              </g>
            </svg>
            <h4>Hours</h4>
          </div>
          <div className="contactText">
            {hours ? (
              <>
                <p>Monday - {hours.monday ? hours.monday : "No Hours Listed."}</p>
                <p>Tuesday - {hours.tuesday ? hours.tuesday : "No Hours Listed."}</p>
                <p>Wednesday - {hours.wednesday ? hours.wednesday : "No Hours Listed."}</p>
                <p>Thursday - {hours.thursday ? hours.thursday : "No Hours Listed."}</p>
                <p>Friday - {hours.friday ? hours.friday : "No Hours Listed."}</p>
                <p>Saturday - {hours.saturday ? hours.saturday : "No Hours Listed."}</p>
                <p>Sunday - {hours.sunday ? hours.sunday : "No Hours Listed."}</p>
              </>
            ) : (
              <p>No Hours listed, please add hours in the global menu.</p>
            )}
          </div>
        </div>
        <div.map id="map" ref={googlemap} />
      </div.contact>
    </Section>
  );
};

export default ContactAndMap;
